function p(e,t,a="vertical"){const c=t.indexOf(e.target);if(c===-1)return null;const i=a==="vertical"?"ArrowDown":"ArrowRight",n=a==="vertical"?"ArrowUp":"ArrowLeft";let r=null;switch(e.key){case i:e.preventDefault(),r=(c+1)%t.length;break;case n:e.preventDefault(),r=(c-1+t.length)%t.length;break;case"Home":e.preventDefault(),r=0;break;case"End":e.preventDefault(),r=t.length-1;break}return r}let l=null;function g(e,t){l?.abort(),l=new AbortController,document.addEventListener("keydown",a=>{a.key==="Escape"&&e.getAttribute("aria-expanded")==="true"&&(t(),e.focus())},{signal:l.signal})}const d="wcag-preferences";function m(e){try{localStorage.setItem(d,JSON.stringify(e))}catch{}}function f(){try{const e=localStorage.getItem(d);if(e)return JSON.parse(e)}catch{}return{fontSize:100,highContrast:!1,grayscale:!1,underlineLinks:!1}}function b(e,t){document.documentElement.style.fontSize=`${e.fontSize}%`,document.documentElement.classList.toggle("high-contrast",e.highContrast),document.documentElement.classList.toggle("grayscale",e.grayscale),document.documentElement.classList.toggle("underline-links",e.underlineLinks);const a=t.querySelector('[data-action="contrast-toggle"]'),c=t.querySelector('[data-action="grayscale-toggle"]'),i=t.querySelector('[data-action="underline-toggle"]');a?.setAttribute("aria-pressed",e.highContrast.toString()),c?.setAttribute("aria-pressed",e.grayscale.toString()),i?.setAttribute("aria-pressed",e.underlineLinks.toString())}function u(){const e=document.getElementById("wcag-widget");if(!e||e.hasAttribute("data-wcag-initialized"))return;e.setAttribute("data-wcag-initialized","true");const t=e.querySelector(".wcag-widget__toggle"),a=document.getElementById("wcag-panel"),c=e.querySelector(".wcag-widget__close"),i=f();let n=i.fontSize;b(i,e),t?.addEventListener("click",()=>{const r=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",(!r).toString()),a?.toggleAttribute("hidden",r)}),c?.addEventListener("click",()=>{t?.setAttribute("aria-expanded","false"),a?.setAttribute("hidden","")}),e.addEventListener("click",r=>{const s=r.target.closest("[data-action]");if(s){switch(s.dataset.action){case"font-increase":n=Math.min(n+10,150),document.documentElement.style.fontSize=`${n}%`;break;case"font-decrease":n=Math.max(n-10,80),document.documentElement.style.fontSize=`${n}%`;break;case"font-reset":n=100,document.documentElement.style.fontSize="100%";break;case"contrast-toggle":{document.documentElement.classList.toggle("high-contrast");const o=s.getAttribute("aria-pressed")==="true";s.setAttribute("aria-pressed",(!o).toString());break}case"grayscale-toggle":{document.documentElement.classList.toggle("grayscale");const o=s.getAttribute("aria-pressed")==="true";s.setAttribute("aria-pressed",(!o).toString());break}case"underline-toggle":{document.documentElement.classList.toggle("underline-links");const o=s.getAttribute("aria-pressed")==="true";s.setAttribute("aria-pressed",(!o).toString());break}case"reset-all":n=100,document.documentElement.style.fontSize="100%",document.documentElement.classList.remove("high-contrast","grayscale","underline-links"),e.querySelectorAll("[aria-pressed]").forEach(o=>{o.setAttribute("aria-pressed","false")});break}m({fontSize:n,highContrast:document.documentElement.classList.contains("high-contrast"),grayscale:document.documentElement.classList.contains("grayscale"),underlineLinks:document.documentElement.classList.contains("underline-links")})}}),t&&g(t,()=>{t.setAttribute("aria-expanded","false"),a?.setAttribute("hidden","")})}u();document.addEventListener("astro:after-swap",u);export{p as h};
