function h(e,a,i="vertical"){const o=a.indexOf(e.target);if(o===-1)return null;const t=i==="vertical"?"ArrowDown":"ArrowRight",r=i==="vertical"?"ArrowUp":"ArrowLeft";let l=null;switch(e.key){case t:e.preventDefault(),l=(o+1)%a.length;break;case r:e.preventDefault(),l=(o-1+a.length)%a.length;break;case"Home":e.preventDefault(),l=0;break;case"End":e.preventDefault(),l=a.length-1;break}return l}let d=null;function m(e,a){d?.abort(),d=new AbortController,document.addEventListener("keydown",i=>{i.key==="Escape"&&e.getAttribute("aria-expanded")==="true"&&(a(),e.focus())},{signal:d.signal})}function u(){const e=document.getElementById("wcag-widget");if(!e||e.hasAttribute("data-wcag-initialized"))return;e.setAttribute("data-wcag-initialized","true");const a=e.querySelector(".wcag-widget__toggle"),i=document.getElementById("wcag-panel"),o=e.querySelector(".wcag-widget__close"),t=document.documentElement;let r=parseInt(localStorage.getItem("itrc-font-size")||"100",10);r!==100&&(t.style.fontSize=`${r}%`),localStorage.getItem("itrc-contrast")==="true"&&(t.classList.add("high-contrast"),e.querySelector('[data-action="contrast-toggle"]')?.setAttribute("aria-pressed","true")),localStorage.getItem("itrc-grayscale")==="true"&&(t.classList.add("grayscale"),e.querySelector('[data-action="grayscale-toggle"]')?.setAttribute("aria-pressed","true")),localStorage.getItem("itrc-underline")==="true"&&(t.classList.add("underline-links"),e.querySelector('[data-action="underline-toggle"]')?.setAttribute("aria-pressed","true"));const l=localStorage.getItem("itrc-theme")||"institucional";e.querySelectorAll("[data-theme]").forEach(s=>{s.classList.toggle("wcag-widget__theme-btn--active",s.dataset.theme===l)}),a?.addEventListener("click",()=>{const s=a.getAttribute("aria-expanded")==="true";a.setAttribute("aria-expanded",(!s).toString()),i?.toggleAttribute("hidden",s)}),o?.addEventListener("click",()=>{a?.setAttribute("aria-expanded","false"),i?.setAttribute("hidden","")}),e.querySelectorAll("[data-theme]").forEach(s=>{s.addEventListener("click",()=>{const g=s.dataset.theme;t.classList.remove("theme-claro","theme-oscuro"),g!=="institucional"&&t.classList.add(`theme-${g}`),localStorage.setItem("itrc-theme",g),e.querySelectorAll("[data-theme]").forEach(n=>{n.classList.toggle("wcag-widget__theme-btn--active",n.dataset.theme===g)})})}),e.addEventListener("click",s=>{const n=s.target.closest("[data-action]");if(n)switch(n.dataset.action){case"font-increase":r=Math.min(r+10,150),t.style.fontSize=`${r}%`,localStorage.setItem("itrc-font-size",String(r));break;case"font-decrease":r=Math.max(r-10,80),t.style.fontSize=`${r}%`,localStorage.setItem("itrc-font-size",String(r));break;case"font-reset":r=100,t.style.fontSize="100%",localStorage.setItem("itrc-font-size","100");break;case"contrast-toggle":{const c=t.classList.toggle("high-contrast");n.setAttribute("aria-pressed",String(c)),localStorage.setItem("itrc-contrast",String(c));break}case"grayscale-toggle":{const c=t.classList.toggle("grayscale");n.setAttribute("aria-pressed",String(c)),localStorage.setItem("itrc-grayscale",String(c));break}case"underline-toggle":{const c=t.classList.toggle("underline-links");n.setAttribute("aria-pressed",String(c)),localStorage.setItem("itrc-underline",String(c));break}case"reset-all":r=100,t.style.fontSize="100%",t.classList.remove("high-contrast","grayscale","underline-links","theme-claro","theme-oscuro"),e.querySelectorAll("[aria-pressed]").forEach(c=>{c.setAttribute("aria-pressed","false")}),e.querySelectorAll("[data-theme]").forEach(c=>{c.classList.toggle("wcag-widget__theme-btn--active",c.dataset.theme==="institucional")}),localStorage.removeItem("itrc-theme"),localStorage.removeItem("itrc-font-size"),localStorage.removeItem("itrc-contrast"),localStorage.removeItem("itrc-grayscale"),localStorage.removeItem("itrc-underline");break}}),a&&m(a,()=>{a.setAttribute("aria-expanded","false"),i?.setAttribute("hidden","")})}u();document.addEventListener("astro:after-swap",u);export{h};
